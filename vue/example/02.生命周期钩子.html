<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>生命周期钩子</title>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>
<body>
  <!-- 每个 Vue 实例在被创建时都要经过一系列的初始化过程——例如，
    需要设置数据监听、编译模板、将实例挂载到 DOM 并在数据变化时更新 DOM 等。
    同时在这个过程中也会运行一些叫做生命周期钩子的函数，这给了用户在不同阶段添加自己的代码的机会。 -->
  <script>
    new Vue({
      data: {
        a: 1
      },
      // 在实例被创建之后执行`created`钩子
      created: function () {
        // `this` 指向 vm 实例
        console.log('a is: ' + this.a) // a is: 1
      }
    })
    // -----------------------------------------
    // 也有一些其它的钩子，在实例生命周期的不同阶段被调用，
    // 如 `mounted`、`updated` 和 `destroyed`。
    // `生命周期钩子的 this 上下文指向调用它的 Vue 实例`。

    // -----------------------------------------
    // 不要在`选项属性`或`回调`上使用箭头函数，
    // 比如 created: () => console.log(this.a) 
    // 或 vm.$watch('a', newValue => this.myMethod())。
    // 因为箭头函数并没有 this，
    // this 会作为变量一直向上级`词法作用域`查找，直至找到为止，
    // 这样经常导致错误发生
  </script>
</body>
</html>